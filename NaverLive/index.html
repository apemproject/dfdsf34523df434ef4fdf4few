<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>GameOnX - Naver Live</title>

  <link rel="stylesheet" href="/assets/style.css">
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    @keyframes blink { 0%,100%{opacity:1;} 50%{opacity:0;} }
    .blink { animation: blink 1s infinite; }
    @keyframes fadeIn { 0%{opacity:0;transform:translateY(20px);}100%{opacity:1;transform:translateY(0);} }
    .fade-in { animation: fadeIn 0.8s ease-out forwards; }

    .poster-container { position: relative; overflow: hidden; border-radius: 0.4rem; }
    .poster { aspect-ratio: 16/9; object-fit: cover; width: 100%; transition: transform .3s ease, filter .3s ease; }
    .poster-container:hover .poster { transform: scale(1.05); filter: brightness(80%); }
  </style>
</head>
<body class="bg-black text-gray-200">

  <header class="fixed top-0 left-0 w-full z-50 bg-gray-900/80 backdrop-blur-md border-b border-gray-800 shadow-md">
    <div class="max-w-7xl mx-auto px-6 py-1 flex justify-between items-center">
      <a href="https://gameonx.my.id">
        <img src="/assets/logo11.png" alt="GameOnX" class="h-10 w-auto">
      </a>
      <nav class="hidden md:flex">
        <a href="https://gameonx.my.id" class="mx-2 text-white hover:text-blue-400 transition">Home</a>
        <a href="https://sociabuzz.com/fiqaz/donate" class="mx-2 text-white hover:text-blue-400 transition">Donate</a>
        <a href="https://chat.whatsapp.com/FtSOKILls4HBAlnjEE5Del" class="mx-2 text-white hover:text-blue-400 transition">Grup Chat</a>
      </nav>
      <button id="menu-btn" class="md:hidden text-2xl focus:outline-none">☰</button>
      <div id="mobile-menu" class="hidden absolute top-full left-0 w-full bg-black bg-opacity-90 shadow-lg md:hidden">
        <a href="https://gameonx.my.id" class="block px-6 py-3 text-white hover:bg-gray-800 hover:text-blue-400">Home</a>
        <a href="https://sociabuzz.com/fiqaz/donate" class="block px-6 py-3 text-white hover:bg-gray-800 hover:text-blue-400">Donate</a>
        <a href="https://chat.whatsapp.com/FtSOKILls4HBAlnjEE5Del" class="block px-6 py-3 text-white hover:bg-gray-800 hover:text-blue-400">Grup Chat</a>
      </div>
    </div>
  </header>

  <main class="max-w-7xl mx-auto px-6 pt-20 pb-20">
    <h2 class="text-xl font-bold text-white mb-6">Naver Live</h2>
    <div id="channel-list" class="grid grid-cols-2 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 sm:gap-6 p-2 sm:p-4"></div>
  </main>

  <footer class="fixed bottom-0 left-0 w-full z-50 bg-gray-900/80 backdrop-blur-md border-t border-gray-800 shadow-md">
    <div class="px-6 py-2 text-center text-sm text-white">
      © 2025 GameOnX - All Rights Reserved
    </div>
  </footer>

  <script>
    const menuBtn = document.getElementById('menu-btn');
    const mobileMenu = document.getElementById('mobile-menu');
    menuBtn.addEventListener('click', () => mobileMenu.classList.toggle('hidden'));

    async function loadChannels() {
      const container = document.getElementById('channel-list');
      container.innerHTML = '<p class="text-gray-400">Loading...</p>';

      try {
        const res = await fetch('https://siegheil.micinproject.my.id/naver?_t=' + Date.now());
        const text = await res.text();

        const data = text.split('\n').map(line => {
          const [title, status, src] = line.split('|').map(s => s?.trim());
          return { title, status, src };
        }).filter(item => item.title);

        container.innerHTML = '';

        data.forEach((item, idx) => {
          const isLive = item.status?.toUpperCase() === "LIVE" && item.src;
          const delay = idx * 0.1;
          const poster = "/assets/naver.jpg";

          container.innerHTML += `
            <a ${isLive ? `href="/Watch/index.html?title=${encodeURIComponent(item.title)}&url=${encodeURIComponent(item.src)}"` : ""}
              class="bg-slate-900 p-1 sm:p-2 rounded-md shadow-lg hover:shadow-xl ${isLive ? 'hover:scale-105' : 'opacity-70 cursor-not-allowed'} transition-transform ring-1 ${isLive ? 'ring-red-500/100' : 'ring-gray-500/100'} fade-in h-full flex flex-col justify-between text-xs sm:text-sm md:text-base"
              style="animation-delay: ${delay}s;">
              
              <!-- Poster -->
              <div class="poster-container w-full aspect-video rounded-md overflow-hidden">
                <img src="${poster}" alt="${item.title}" class="poster rounded-md">
              </div>

              <!-- Konten -->
              <div class="mt-3 sm:mt-4 flex flex-col flex-grow justify-between">
                <h3 class="text-xs sm:text-sm md:text-base font-semibold text-white leading-snug">${item.title}</h3>
                <p class="mt-2 sm:mt-3 text-[0.6rem] sm:text-xs md:text-sm font-normal ${isLive ? 'text-red-400 blink' : 'text-green-400'}">
                  ${isLive ? 'LIVE' : 'SOON'}
                </p>
              </div>
            </a>
          `;
        });

      } catch (err) {
        container.innerHTML = `<p class="text-red-400">Gagal memuat data</p>`;
        console.error(err);
      }
    }

    loadChannels();
    // Auto-refresh tiap 30 detik
    setInterval(loadChannels, 30000);
    
    document.addEventListener("contextmenu", e => e.preventDefault());
    document.addEventListener("keydown", function(e) {
      if (e.key === "F12") e.preventDefault();
      if ((e.ctrlKey && e.shiftKey && 
          (e.key === "I" || e.key === "J" || e.key === "C")) || 
          (e.ctrlKey && e.key === "u")) {
        e.preventDefault();
      }
    });
  </script>
</body>
</html>
